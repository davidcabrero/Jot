<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="Jot.Controls.RichTextEditor"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" Background="{ThemeResource LayerFillColorDefaultBrush}" 
                BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}" 
                BorderThickness="0,0,0,1" Padding="8">
            <ScrollViewer HorizontalScrollMode="Auto" HorizontalScrollBarVisibility="Auto" 
                         VerticalScrollMode="Disabled" VerticalScrollBarVisibility="Disabled">
                <StackPanel Orientation="Horizontal" Spacing="4">
                    
                    <!-- Text Formatting -->
                    <Button x:Name="BoldButton" Click="BoldButton_Click" 
                            ToolTipService.ToolTip="Bold (Ctrl+B)"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8DD;" FontWeight="Bold"/>
                    </Button>
                    
                    <Button x:Name="ItalicButton" Click="ItalicButton_Click" 
                            ToolTipService.ToolTip="Italic (Ctrl+I)"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8DB;" FontStyle="Italic"/>
                    </Button>
                    
                    <Button x:Name="StrikethroughButton" Click="StrikethroughButton_Click" 
                            ToolTipService.ToolTip="Strikethrough"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xEDE0;"/>
                    </Button>
                    
                    <Button x:Name="HighlightButton" Click="HighlightButton_Click" 
                            ToolTipService.ToolTip="Highlight"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE7E6;"/>
                    </Button>

                    <MenuFlyoutSeparator/>

                    <!-- Code -->
                    <Button x:Name="CodeButton" Click="CodeButton_Click" 
                            ToolTipService.ToolTip="Inline Code"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE943;"/>
                    </Button>
                    
                    <Button x:Name="CodeBlockButton" Click="CodeBlockButton_Click" 
                            ToolTipService.ToolTip="Code Block"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE90F;"/>
                    </Button>

                    <MenuFlyoutSeparator/>

                    <!-- Headers and Structure -->
                    <Button x:Name="HeaderButton" Click="HeaderButton_Click" 
                            ToolTipService.ToolTip="Header"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8C9;"/>
                    </Button>
                    
                    <Button x:Name="QuoteButton" Click="QuoteButton_Click" 
                            ToolTipService.ToolTip="Quote"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8D3;"/>
                    </Button>

                    <MenuFlyoutSeparator/>

                    <!-- Lists -->
                    <Button x:Name="ListButton" Click="ListButton_Click" 
                            ToolTipService.ToolTip="Bullet List"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8FD;"/>
                    </Button>
                    
                    <Button x:Name="NumberedListButton" Click="NumberedListButton_Click" 
                            ToolTipService.ToolTip="Numbered List"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8FE;"/>
                    </Button>
                    
                    <Button x:Name="CheckboxButton" Click="CheckboxButton_Click" 
                            ToolTipService.ToolTip="Checkbox"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE73A;"/>
                    </Button>

                    <MenuFlyoutSeparator/>

                    <!-- Media and Links -->
                    <Button x:Name="ImageButton" Click="ImageButton_Click" 
                            ToolTipService.ToolTip="Insert Image"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xEB9F;"/>
                    </Button>
                    
                    <Button x:Name="LinkButton" Click="LinkButton_Click" 
                            ToolTipService.ToolTip="Insert Link"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE71B;"/>
                    </Button>

                    <MenuFlyoutSeparator/>

                    <!-- Interactive Elements -->
                    <Button x:Name="CollapsibleButton" Click="CollapsibleButton_Click" 
                            ToolTipService.ToolTip="Collapsible Section"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE76C;"/>
                    </Button>
                    
                    <Button x:Name="QuizButton" Click="QuizButton_Click" 
                            ToolTipService.ToolTip="Insert Quiz"
                            Background="Transparent" BorderThickness="0">
                        <FontIcon Glyph="&#xE8EB;"/>
                    </Button>

                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Text Editor -->
        <Border Grid.Row="1" Background="{ThemeResource LayerFillColorDefaultBrush}">
            <TextBox x:Name="ContentTextBox" 
                     AcceptsReturn="True" 
                     TextWrapping="Wrap"
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto"
                     BorderThickness="0"
                     Background="Transparent"
                     Padding="16"
                     FontFamily="Consolas, Courier New, monospace"
                     FontSize="14"
                     TextChanged="ContentTextBox_TextChanged"
                     KeyDown="ContentTextBox_KeyDown"/>
        </Border>
    </Grid>
</UserControl>